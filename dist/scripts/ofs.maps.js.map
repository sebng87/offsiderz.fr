{"version":3,"sources":["../assets/scripts/ofs.maps.js"],"names":["$","window","document","console","log","length","lat","data","lng","mapboxgl","accessToken","map","Map","style","container","center","zoom","attributionControl","addControl","AttributionControl","compact","NavigationControl","showCompass","on","loadImage","$ofs","themeDirectory","error","image","addImage","addLayer","id","type","source","features","geometry","coordinates","layout","icon-image","icon-size","jQuery"],"mappings":"CAMA,SAAAA,EAAAC,EAAAC,GACA,YAoFAF,GAAA,WAKA,GAJAG,QAAAC,IAAA,uBAIAJ,EAAA,QAAAK,OAAA,CACA,GAAAC,GAAAN,EAAA,QAAAO,KAAA,OACAC,EAAAR,EAAA,QAAAO,KAAA,MAEAE,UAAAC,YAAA,4FAEA,IAAAC,GAAA,GAAAF,UAAAG,KACAC,MAAA,qDACAC,UAAA,MACAC,QAAAP,EAAAF,GACAU,KAAA,GACAC,oBAAA,IACAC,WAAA,GAAAT,UAAAU,oBACAC,SAAA,KACAF,WAAA,GAAAT,UAAAY,mBACAC,aAAA,IACA,YAEAX,GAAAY,GAAA,OAAA,WAEAZ,EAAAa,UAAAC,KAAAC,eAAA,iCAAA,SAAAC,EAAAC,GACA,GAAAD,EAAA,KAAAA,EACAhB,GAAAkB,SAAA,gBAAAD,GAEAjB,EAAAmB,UACAC,GAAA,UACAC,KAAA,SAEAC,QACAD,KAAA,UACAzB,MACAyB,KAAA,oBACAE,WAAAF,KAAA,UAAAG,UACAH,KAAA,QACAI,aAAA5B,EAAAF,QAIA+B,QACAC,aAAA,gBACAC,YAAA,cAyBAtC,OAAAuC,OAAAvC,OAAAC","file":"ofs.maps.js","sourcesContent":["/**\n * Google Map\n * \n * @template Event single page\n */\n\n;(function($, window, document) {\n    \"use strict\";\n\n    var map, marker, last_center, is_loaded = false;\n\n    /*********************\n    * Loader\n    ********************/\n\n    var loader = {\n        show : function() {\n            $('#map').addClass('is-loading');\n        },\n        hide : function() {\n            $('#map').removeClass('is-loading');\n        }\n    };\n\n    /*********************\n    * Drop Markers\n    ********************/\n\n    function dropMarker(i) {\n        return function() {\n            markers[i].setMap(map);\n        };\n    }\n\n    /*********************\n    * Initialize map\n    ********************/\n\n    var init_map = function(lat, lng) {\n        loader.hide();\n\n        /**\n         * Map centered on the user position\n         */\n        var searched_position = new google.maps.LatLng(lat, lng);\n            last_center = searched_position;\n\n        var cfg = {\n            center: searched_position,\n            zoom: 15,\n            panControl: false,\n            scaleControl: false,\n            scrollwheel: false,\n            streetViewControl: false,\n            mapTypeControl: false,\n            zoomControl: true,\n            fullscreenControl: false\n        };\n\n        map = new google.maps.Map(document.getElementById(\"map\"), cfg);\n\n        /**\n         * Center map when the window has been resized\n         */\n        google.maps.event.addDomListener(window, 'resize', function() {\n            map.setCenter(last_center);\n        });\n\n        marker = new google.maps.Marker({\n            position: new google.maps.LatLng(lat, lng),\n            // animation: null,\n            animation: google.maps.Animation.DROP,\n            icon: {\n                url: $ofs.themeDirectory + '/dist/images/common/pin.png',\n                scaledSize: new google.maps.Size(21,40),\n                size: new google.maps.Size(21,40)\n            },\n            optimized: true\n        });\n\n        marker.setMap(map);\n        marker.setVisible(true);\n\n        is_loaded = true;\n    };\n\n\n    /*********************\n    * DOM Ready\n    ********************/\n\n    $(function() {\n        console.log('ofs.maps.js > ready');\n        // https://www.latlong.net/\n        // https://www.mapbox.com/help/marker-playground/\n    \n        if($('#map').length){\n            var lat = $('#map').data('lat');\n            var lng = $('#map').data('lng');\n            \n            mapboxgl.accessToken = 'pk.eyJ1Ijoic2ViaXNhcnQiLCJhIjoiY2pqZ3ZiajBsMDRqbTNrbWd4Z2FzNDB5dCJ9.09EeFhx-1Pm2pqnwBbzcJg';\n\n            var map = new mapboxgl.Map({\n                style: 'mapbox://styles/sebisart/cjjgvot6f44mo2srk8snmjvch',\n                container: 'map',\n                center: [lng, lat],\n                zoom: 15,\n                attributionControl: false\n            }).addControl(new mapboxgl.AttributionControl({\n                compact: true\n            })).addControl(new mapboxgl.NavigationControl({\n                showCompass: false\n            }), 'top-right');\n\n            map.on(\"load\", function () {\n                /* Image: An image is loaded and added to the map. */\n                map.loadImage($ofs.themeDirectory + '/dist/images/common/pin@2x.png', function (error, image) {\n                    if (error) { throw error; }\n                    map.addImage(\"custom-marker\", image);\n                    /* Style layer: A style layer ties together the source and image and specifies how they are displayed on the map. */\n                    map.addLayer({\n                        id: \"markers\",\n                        type: \"symbol\",\n                        /* Source: A data source specifies the geographic coordinate where the image marker gets placed. */\n                        source: {\n                            type: \"geojson\",\n                            data: {\n                                type: \"FeatureCollection\",\n                                features: [{ \"type\": \"Feature\", \"geometry\": { \n                                    \"type\": \"Point\", \n                                    \"coordinates\": [lng, lat]\n                                } }]\n                            }\n                        },\n                        layout: {\n                            \"icon-image\": \"custom-marker\",\n                            \"icon-size\": 0.5\n                        }\n                    });\n                });\n            });\n            \n            // var marker = new mapboxgl.Marker()\n            //     .setLngLat([-0.06, 51.54])\n            //     .addTo(map);\n            \n            // var scale = new mapboxgl.ScaleControl({\n            //     maxWidth: 80,\n            //     unit: 'imperial'\n            // });\n            // map.addControl(scale);\n            \n            // scale.setUnit('metric');\n\n\n            // new mapboxgl.LngLat(-73.9876, 40.7661);\n\n            // google.maps.event.addDomListener(window, 'load', init_map(lat, lng));\n        }\n    \n    });\n}(window.jQuery, window, document));\n"],"sourceRoot":"assets/scripts/"}